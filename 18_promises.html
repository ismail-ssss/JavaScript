<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      //++++++++++++ promises ++++++++
      // promise is for eventual comletion of task. it is an object in js.
      // it is a solution to callback hell.

      //.............. then, catch, promise in asyncronous, promise chain.....

      // let promise = new Promise((resolve, reject) => {
      //   console.log("I am a promise");
      //   //   resolve("some value");
      //   //   reject("some ERROR");
      // });

      // function getData(dataId, getNextData) {
      //   return new Promise((resolve, reject) => {
      //     setTimeout(() => {
      //       resolve("success");
      //       console.log("data", dataId);
      //       if (getNextData) {
      //         getNextData();
      //       }
      //     }, 5000);
      //   });
      // }

      // run in console to see states........

      // let promise1 = getData(1, () => {
      //   getData(2);
      // });
      // console.log(promise1);

      // ............. .then() if it resolve .catch()if it reject  ..........
      const getPromise = () => {
        return new Promise((resolve, reject) => {
          console.log("I am a promise");
          // resolve("some value");
          reject("some ERROR");
        });
      };

      // let promise = getPromise();
      // promise.then(() => {
      //   console.log("promise fullfil");
      // });
      // let promise1 = getPromise();
      // promise.catch(() => {
      //   console.log("promise fullfil");
      // });

      // ........... promise in asyncronous ..................
      // allows your code to run in the background without
      // blocking the execution of other code.

      function asyncFunc() {
        return new Promise((resolve, reject) => {
          setTimeout(() => {
            console.log("data 1 returned");
            resolve("success");
          }, 3000);
        });
      }
      function asyncFunc2() {
        return new Promise((resolve, reject) => {
          setTimeout(() => {
            console.log("data 2 returned");
            resolve("success");
          }, 3000);
        });
      }

      // console.log("factching data1");
      // let p1 = asyncFunc();
      // p1.then((res) => {
      //   console.log(res);
      //   console.log("factching data2");
      //   let p2 = asyncFunc2();
      //   p2.then((res) => {
      //     console.log(res);
      //   });
      // });

      // another way to call

      console.log("factching data1");
      asyncFunc().then((res) => {
        console.log(res);
        console.log("factching data2");
        asyncFunc2().then((res) => {
          console.log(res);
        });
      });

      // ............ promise chain ...............
      // console.log("factching data1");
      // getData(1).then((res) => {
      //   console.log(res);
      //   console.log("factching data2");
      //   getData(2).then((res) => {
      //     console.log(res);
      //   });
      // });

      // another way
      console.log("factching data1");
      getData(1)
        .then((res) => {
          console.log(res);
          console.log("factching data2");
          return getData(2);
        })
        .then((res) => {
          console.log(res);
        });
    </script>
  </body>
</html>
